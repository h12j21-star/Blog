---
title: React-testing-Library (Typescript) + ì˜¤ë¥˜ í•´ê²°
date: 2023-10-06
description: ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸í…ŒìŠ¤íŠ¸í•˜ê¸°!
tags:
  - React
  - Jest
---

## ğŸ“ React testing Libraryë€?

react testing ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.
React testing libraryëŠ” ì‹¤ì œ DOM ë…¸ë“œë¥¼ ì‚¬ìš©í•´ ë¸Œë¼ìš°ì €ë¥¼ ì‹¤í–‰í•˜ëŠ” ìƒí™©ê³¼ ìœ ì‚¬í•˜ê²Œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤. í…ŒìŠ¤íŠ¸ëŠ” ì‹¤ì œ ì†Œí”„íŠ¸ì›¨ì–´ì™€ ìœ ì‚¬í•˜ê²Œ ì‘ë™í• ë•Œ ë” ì‹ ë¢°ë¥¼ ì–»ê¸° ë•Œë¬¸ì— react-testing libraryëŠ” ì‹ ë¢°í• ë§Œí•œ ë„êµ¬ì´ë‹¤.
React Testing LibraryëŠ” **ì‚¬ìš©ìê°€ ë³´ê³  ìˆ˜í–‰í•˜ëŠ” ì‘ì—…**ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì„ ëª©í‘œë£Œí•œë‹¤.

## ì‹œì‘í•˜ê¸°

CRAì—ì„œëŠ” ì ìš©ì´ ë˜ì–´ìˆê¸°ë•Œë¬¸ì— ì„¤ì¹˜ ê³¼ì •ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.
CRAë¡œ ì‹œì‘í•œ í”„ë¡œì íŠ¸ê°€ ì•„ë‹ˆë¼ë©´

```
npm install --save-dev @testing-library/react
```

**â›”ï¸ ì´ëŸ¬í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´**

![](https://velog.velcdn.com/images/h12j21/post/b87ccfc8-89af-4419-af5d-51abf9a9b1e2/image.png)

![](https://velog.velcdn.com/images/h12j21/post/e529004d-0ce1-43d0-9dde-5bdebf28ea57/image.png)

**í•´ê²°ë²• 1.**
ì´ê²ƒì€ jestê°€ jsêµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì§€ ëª»í•´ì„œ ë°œìƒí•œë‹¤. import , export ë¬¸ë²•ì„ í•´ì„í•˜ì§€ ëª»í•˜ëŠ” ê²ƒì´ë‹¤. Babelì„ ì‚¬ìš©í•´ì„œ ì½”ë“œë¥¼ ë³€í™˜í•˜ê³ , Jest êµ¬ì„±ì—ì„œ ES6 ëª¨ë“ˆì„ ì§€ì›í•˜ë„ë¡ ì„¤ì •í•´ì•¼ í•œë‹¤.

```
npm i --dev @babel/preset-env babel/preset-typescript
```

```tsx
//babel.config.js
module.exports = {
  presets: [['@babel/preset-env', { targets: { node: 'current' } }], '@babel/preset-typescript'],
};
```

**í•´ê²°ë²• 2.**
scriptì˜ í…ŒìŠ¤íŠ¸ ë¶€ë¶„ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•œë‹¤. ì´ëŠ” ì¼ì‹œì ì¸ í•´ê²°ì±…ìœ¼ë¡œ ì™„ë²½í•œ ë°©ë²•ì€ ì•„ë‹ˆë‹¤.

ì°¸ê³  : https://github.com/axios/axios/issues/5101

```json
//pakage.json

"test": "react-scripts test --transformIgnorePatterns \"node_modules/(?!axios)/\"",
```

## react-testing library ì˜¤ë¥˜ - Custom render

**ì—ëŸ¬ 1**
![](https://velog.velcdn.com/images/h12j21/post/c93c204f-d666-4f94-926d-6e671331734d/image.png)

**ì—ëŸ¬2**
![](https://velog.velcdn.com/images/h12j21/post/d3e10212-be58-4669-9fca-d3986f382968/image.png)

testë¥¼ ì§„í–‰í•˜ë‹¤ê°€ theme,Router ê´€ë ¨í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤. ì „ì—­ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œëŠ” ì „ì—­ ì»¨í…ìŠ¤ê°€ renderë¥¼ ê°ì‹¸ì•¼í–ˆë‹¤. ì´ëŠ” custom renderì„ ë§Œë“¤ì–´ ê° í…ŒìŠ¤íŠ¸ ë§ˆë‹¤ renderí• ë•Œ ì¤‘ë³µ ì½”ë“œë¥¼ ì—†ì•¨ ìˆ˜ìˆë‹¤.

jestê³µì‹ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë§í•˜ê³  ìˆë‹¤.

> ì „ì—­ ì»¨í…ìŠ¤íŠ¸ ê³µê¸‰ì, ë°ì´í„° ì €ì¥ì†Œ ë“±ê³¼ ê°™ì€ í•­ëª©ì„ í¬í•¨í•˜ëŠ” ì‚¬ìš©ì ì •ì˜ ë Œë”ë§ ë°©ë²•ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ ìœ ìš©í•œ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.

```tsx
//App.tsx
<BrowserRouter>
  <QueryClientProvider client={queryclient}>
    <RecoilRoot>
      <ThemeProvider theme={theme}>
        <ToastContainer
          style={{ fontSize: '1.3rem' }}
          position="top-right"
          autoClose={1000}
          hideProgressBar
          newestOnTop={false}
          closeOnClick
          rtl={false}
          pauseOnFocusLoss
          draggable
          pauseOnHover
          theme="light"
        />
        <GlobalStyle />
        <Routers />
      </ThemeProvider>
    </RecoilRoot>
  </QueryClientProvider>
</BrowserRouter>
```

"App"ì»´í¬ë„ŒíŠ¸ì˜ êµ¬ì„±ì— ë”°ë¼ custom renderì„ ë§Œë“¤ì–´ì¤¬ë‹¤.
provider-utilsë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ê³  renderë¥¼ exportí•´ì£¼ì—ˆë‹¤.

```jsx
// provider-utils.tsx
const queryclient = new QueryClient();
const AllTheProviders = ({ children }: { children: React.ReactNode }) => {
    return (
        <Router>
            <QueryClientProvider client={queryclient}>
                <RecoilRoot>
                    <ThemeProvider theme={theme}>{children}</ThemeProvider>
                </RecoilRoot>
            </QueryClientProvider>
        </Router>
    );
};

const customRender = (
ui: ReactElement,
color?: string,
options?: Omit<RenderOptions, 'wrapper'>
) => {
return render(ui, { wrapper: AllTheProviders, ...options });
};
export \* from '@testing-library/react';
export { customRender as render };

```

## ğŸ’ª í…ŒìŠ¤íŠ¸ ì‹œì‘

**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**

- ë‹¬ë ¥ ë‚ ì§œ ëª©ë¡ì´ ë Œë”ë§ ëœë‹¤.
- ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ ëª¨ë‹¬ì´ ë‚˜íƒ€ë‚œë‹¤.
- ìƒ‰ìƒì„ ì„ íƒí•˜ë©´ ëª¨ë‹¬ ë°°ê²½ì´ ë°”ë€ë‹¤.

ìœ„ì˜ í…ŒìŠ¤íŠ¸ë“¤ì€ ë¦¬íŒ©í† ë§ìœ¼ë¡œ ë‹¤ë¥¸ ì½”ë“œë¥¼ ê±´ë“œë ¸ë‹¤ê°€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë˜ ìƒí™©ë“¤ì´ë‹¤.

**ë©”ì†Œë“œ**
renderëŠ” íŠ¹ì • ì»´í¬ë„ŒíŠ¸ë¥¼ ë°›ì•„ ë²„ì¸„ì–¼ ë”ì„ ìƒì„±í•œë‹¤.
screenì€ ì¿¼ë¦¬ ë©”ì†Œë“œë¥¼ ì´ìš©í•´ ìš”ì†Œì— ì ‘ê·¼ í•  ìˆ˜ ìˆë‹¤.
ê·¸ë¦¬ê³  í•„ìš”í•œ jest matcherì™€ user-eventëŠ” ê³µì‹ í˜ì´ì§€ì—ì„œ ì°¾ì•„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
ğŸ”—
https://github.com/testing-library/jest-dom
https://testing-library.com/docs/ecosystem-user-event/

```tsx
test('ë‹¬ë ¥ ë‚ ì§œ ëª©ë¡ì´ ë Œë”ë§ ëœë‹¤. ', async () => {
        render(<Days days={days} />);
        const dateLi = await screen.findAllByRole('listitem');
        dateLi.forEach((date) => {
            expect(date).toBeInTheDocument();
        });
    });

    test('ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ ëª¨ë‹¬ì´ ë‚˜íƒ€ë‚œë‹¤.', () => {
        render(<Days days={days} />);
        const todayLi = screen.getByTestId(`dateLi-${todaydate}`);
        expect(todayLi).toBeInTheDocument();
        fireEvent.click(todayLi);
        const modal = screen.getByText('ì¼ê¸° ëª¨ë‹¬');
        expect(modal).toBeInTheDocument();
    });

    test('ìƒ‰ìƒì„ ì„ íƒí•˜ë©´ ëª¨ë‹¬ ë°°ê²½ì´ ë°”ë€ë‹¤.', () => {
        const data = [
            {
                id: 1,
                user_id: 1,
                datetime: todaydate,
                content_title: 'ì¼ê¸°ì œëª©',
                content_main: 'ë‚´ìš©',
                color: 'fff',
                content_image: '',
            },
        ];
        render(<Diary data={data} />);
        const backgroud = screen.getByTestId('diary');
        expect(backgroud).toHaveStyle({ color: data[0].color });
```

**test ê²°ê³¼**

![](https://velog.velcdn.com/images/h12j21/post/e2506b62-3a9f-44c1-a01e-8759c14fae0e/image.png)

## ì¶”ê°€ - theme ì‚¬ìš©í•˜ê¸°

themeproviderë¥¼ ì„¤ì •í•˜ë ¤ë©´ jestê°€ styled-componentë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì£¼ì…í•´ì£¼ì–´ì•¼í•œë‹¤.

```
npm i jest-styled-components
```

ì„¤ì¹˜ë¥¼ í•œë’¤ jest.config.tsxíŒŒì¼ì— ì„¤ì •ì„ í•´ì£¼ì–´ì•¼í•œë‹¤.

```
 setupFilesAfterEnv: ['setupTests.ts', 'jest-styled-components'],
```

> ì°¸ê³  ë¸”ë¡œê·¸
> https://ui.toast.com/posts/ko_20210630 > https://medium.com/hcleedev/web-react-testing-library%EC%9D%98-%EA%B0%9C%EB%85%90%EA%B3%BC-%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%98%88%EC%8B%9C-b94ea633bdaa
